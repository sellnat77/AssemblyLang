A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 10:12:48 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN Projeft1.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeft1.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1                     ORG 0000H
0000                   2     MAIN:
0000 D280              3                     SETB P0.0
0002 D281              4                     SETB P0.1
0004 D282              5                     SETB P0.2
0006 D283              6                     SETB P0.3
0008 D284              7                     SETB P0.4
000A D285              8                     SETB P0.5
000C D286              9                     SETB P0.6
000E D287             10                     SETB P0.7
0010                  11     LOOP:
0010 1194             12                     ACALL CHOOSE
                      13     
                      14                     
0012 80FC             15                     SJMP LOOP
                      16     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0014                  17     MODE1:  ;Bouncing
0014 7401             18                     MOV A, #01H     ;Reset A
0016 7807             19                     MOV R0,#07H ;2 Registers used to bounce left 
0018 7907             20                     MOV R1,#07H     ;Then right
001A 208002           21     MLEFT:  JB P0.0,SKIP    
001D 1194             22                     ACALL CHOOSE
001F                  23     SKIP:           
                      24     ;               JB P0.1,BCOUN           
                      25     ;               JB P0.2,BCYC
                      26     ;               JB P0.3,BDBLBOUN
                      27     ;               SJMP LEND
                      28     ;               
                      29     ;BCOUN: LCALL MODE2     
                      30     ;               SJMP LEND
                      31     ;BCYC:  LCALL MODE3     
                      32     ;               SJMP LEND
                      33     ;BDBLBOUN:LCALL MODE4   
                      34     ;               SJMP LEND
                      35     ;               LCALL OFF
                      36     ;LEND:
001F F590             37                     MOV P1, A ;Rotate left 7 times
0021 23               38                     RL A
                      39                     ;LCALL DELAYCH
0022 11B5             40                     ACALL CHDELAY
0024 120089           41                     LCALL DELAY
                      42                     
0027 D8F1             43                     DJNZ R0,MLEFT
0029 208002           44     RIGHT:  JB P0.0,BSKIP
002C 1194             45                     ACALL CHOOSE
002E                  46     BSKIP:
                      47     ;               JB P0.1,BBCOUN          
                      48     ;               JB P0.2,BBCYC
                      49     ;               JB P0.3,BBDBLBOUN
                      50     ;               SJMP BLEND
                      51     ;               
                      52     ;BBCOUN:        LCALL MODE2     
                      53     ;               SJMP BLEND
                      54     ;BBCYC: LCALL MODE3     
                      55     ;               SJMP BLEND
                      56     ;BBDBLBOUN:LCALL MODE4  
                      57     ;               SJMP BLEND
                      58     ;               LCALL OFF
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 10:12:48 PAGE     2

                      59     ;BLEND:
002E F590             60                     MOV P1, A ;Rotate right 7 times
0030 03               61                     RR A
                      62                     ;LCALL DELAYCH
0031 11B5             63                     ACALL CHDELAY
0033 120089           64                     LCALL DELAY
0036 D9F1             65                     DJNZ R1,RIGHT
0038 22               66                     RET             
                      67     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0039                  68     MODE2:  ;Counting
0039 E4               69                     CLR A
003A 7AFF             70                     MOV R2,#0FFH
003C 208102           71     AGAIN:  JB P0.1,CSKIP
003F 1194             72                     ACALL CHOOSE
0041                  73     CSKIP:
                      74     ;               JB P0.0,CBOUN           
                      75     ;               JB P0.2,CCYC
                      76     ;               JB P0.3,CDBLBOUN
                      77     ;               SJMP CLEND
                      78     ;               
                      79     ;CBOUN: LCALL MODE1     
                      80     ;               SJMP CLEND
                      81     ;CCYC:  LCALL MODE3     
                      82     ;               SJMP CLEND
                      83     ;CDBLBOUN:LCALL MODE4   
                      84     ;               SJMP CLEND
                      85     ;               LCALL OFF
                      86     ;CLEND:
0041 04               87                     INC A
0042 F590             88                     MOV P1,A
                      89                     
0044 11B5             90                     ACALL CHDELAY
0046 120089           91                     LCALL DELAY
                      92     
0049 D8F1             93                     DJNZ R0,AGAIN
004B 22               94                     RET
                      95     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
004C                  96     MODE3:  ;Double bouncing
                      97                     ;LCALL MODECH
004C 1194             98                     ACALL CHOOSE
004E 11B5             99                     ACALL CHDELAY
0050 22              100                     RET
                     101     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0051                 102     MODE4:  ;Cyclic
                     103                     ;LCALL MODECH
0051 7401            104                     MOV A,#01H
0053 7808            105                     MOV R0,#08H
                     106                     
0055 208302          107     NEXT:   JB P0.3,CYSKIP
0058 1194            108                     ACALL CHOOSE
005A                 109     CYSKIP:
005A F590            110                     MOV P1,A
005C A990            111                     MOV R1,P1
005E 23              112                     RL A
005F 4590            113                     ORL A,P1
0061 11B5            114                     ACALL CHDELAY
0063 120089          115                     LCALL DELAY
0066 D8ED            116                     DJNZ R0,NEXT
                     117                     
0068 22              118                     RET
                     119     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0069                 120     OFF:    ;Flashing
                     121                     ;LCALL MODECH
0069 E4              122                     CLR A
006A 7801            123                     MOV R0,#01H
006C 1194            124     TOP:    ACALL CHOOSE
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 10:12:48 PAGE     3

006E 11B5            125                     ACALL CHDELAY
0070 74FF            126                     MOV A,#0FFH
0072 F590            127                     MOV P1,A
0074 120089          128                     LCALL DELAY
0077 E4              129                     CLR A
0078 F590            130                     MOV P1,A
007A D8F0            131                     DJNZ R0,TOP
007C 22              132                     RET
                     133     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
007D                 134     PFIVE:  ;.5 sec delay
007D 7F10            135                     MOV R7, #010H ;Delay function
007F 22              136                     RET
                     137     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0080                 138     ONE:    ;1 dec delay
0080 7F20            139                     MOV R7, #020H ;Delay function
0082 22              140                     RET
                     141     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0083                 142     ONEFI:  ;1.5 sec delay
0083 7F04            143                     MOV R7, #04H ;Delay function
0085 22              144                     RET
                     145     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0086                 146     TWO:    ;2 sec delay
0086 7F80            147                     MOV R7, #080H ;Delay function
0088 22              148                     RET
                     149     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0089                 150     DELAY:
0089 7EFF            151     DLY20:  MOV R6, #0FFH
008B 7DFF            152     DLY21:  MOV R5, #0FFH
008D DDFE            153     DLY22:  DJNZ R5, DLY22
008F DEFA            154                     DJNZ R6, DLY21
0091 DFF6            155                     DJNZ R7, DLY20
0093 22              156                     RET
                     157     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0094                 158     CHOOSE:
0094 20800D          159                     JB P0.0, BOUN
0097 20810E          160                     JB P0.1, COUN
009A 20820F          161                     JB P0.2, DBL
009D 208310          162                     JB P0.3, CYC
                     163                     
                     164                     
00A0 1169            165                     ACALL OFF
00A2 8010            166                     SJMP BOT
00A4 1114            167     BOUN:   ACALL MODE1
00A6 800C            168                     SJMP BOT
00A8 1139            169     COUN:   ACALL MODE2
00AA 8008            170                     SJMP BOT
00AC 114C            171     DBL:    ACALL MODE3
00AE 8004            172                     SJMP BOT
00B0 1151            173     CYC:    ACALL MODE4
00B2 8000            174                     SJMP BOT
00B4 22              175     BOT:    RET             
                     176     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00B5                 177     CHDELAY:
00B5 20850A          178                     JB P0.5, CONE
00B8 20860B          179                     JB P0.6, CONEFI
00BB 20870C          180                     JB P0.7, CTWO
                     181                     
00BE 117D            182                     ACALL PFIVE
00C0 800A            183                     SJMP ENDTIME
00C2 1180            184     CONE:   ACALL ONE
00C4 8006            185                     SJMP ENDTIME
00C6 1183            186     CONEFI: ACALL ONEFI
00C8 8002            187                     SJMP ENDTIME
00CA 1186            188     CTWO:   ACALL TWO
00CC 22              189     ENDTIME: RET
                     190                     
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 10:12:48 PAGE     4

                     191     END
                                     
                             ;JB 2
                             ;LCALL 1
                             ;SJMP TOP
                             ;LABEL 2 CALL 2
                             ;SJMP TOP
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 10:12:48 PAGE     5

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AGAIN. . . . . . .  C ADDR   003CH   A   
BOT. . . . . . . .  C ADDR   00B4H   A   
BOUN . . . . . . .  C ADDR   00A4H   A   
BSKIP. . . . . . .  C ADDR   002EH   A   
CHDELAY. . . . . .  C ADDR   00B5H   A   
CHOOSE . . . . . .  C ADDR   0094H   A   
CONE . . . . . . .  C ADDR   00C2H   A   
CONEFI . . . . . .  C ADDR   00C6H   A   
COUN . . . . . . .  C ADDR   00A8H   A   
CSKIP. . . . . . .  C ADDR   0041H   A   
CTWO . . . . . . .  C ADDR   00CAH   A   
CYC. . . . . . . .  C ADDR   00B0H   A   
CYSKIP . . . . . .  C ADDR   005AH   A   
DBL. . . . . . . .  C ADDR   00ACH   A   
DELAY. . . . . . .  C ADDR   0089H   A   
DLY20. . . . . . .  C ADDR   0089H   A   
DLY21. . . . . . .  C ADDR   008BH   A   
DLY22. . . . . . .  C ADDR   008DH   A   
ENDTIME. . . . . .  C ADDR   00CCH   A   
LOOP . . . . . . .  C ADDR   0010H   A   
MAIN . . . . . . .  C ADDR   0000H   A   
MLEFT. . . . . . .  C ADDR   001AH   A   
MODE1. . . . . . .  C ADDR   0014H   A   
MODE2. . . . . . .  C ADDR   0039H   A   
MODE3. . . . . . .  C ADDR   004CH   A   
MODE4. . . . . . .  C ADDR   0051H   A   
NEXT . . . . . . .  C ADDR   0055H   A   
OFF. . . . . . . .  C ADDR   0069H   A   
ONE. . . . . . . .  C ADDR   0080H   A   
ONEFI. . . . . . .  C ADDR   0083H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PFIVE. . . . . . .  C ADDR   007DH   A   
RIGHT. . . . . . .  C ADDR   0029H   A   
SKIP . . . . . . .  C ADDR   001FH   A   
TOP. . . . . . . .  C ADDR   006CH   A   
TWO. . . . . . . .  C ADDR   0086H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
