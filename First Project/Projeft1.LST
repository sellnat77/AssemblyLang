A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 12:03:26 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN Projeft1.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeft1.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1                     ORG 0000H
0000                   2     MAIN:
0000 D280              3                     SETB P0.0
0002 D281              4                     SETB P0.1
0004 D282              5                     SETB P0.2
0006 D283              6                     SETB P0.3
0008 D284              7                     SETB P0.4
000A D285              8                     SETB P0.5
000C D286              9                     SETB P0.6
000E D287             10                     SETB P0.7
0010                  11     LOOP:
0010 11C8             12                     ACALL CHOOSE
                      13     
                      14                     
0012 80FC             15                     SJMP LOOP
                      16     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0014                  17     MODE1:  ;Bouncing
0014 7401             18                     MOV A, #01H     ;Reset A
0016 7807             19                     MOV R0,#07H ;2 Registers used to bounce left 
0018 7907             20                     MOV R1,#07H     ;Then right
001A 208002           21     MLEFT:  JB P0.0,SKIP    
001D 11C8             22                     ACALL CHOOSE
001F                  23     SKIP:           
                      24     
001F F590             25                     MOV P1, A ;Rotate left 7 times
0021 23               26                     RL A
                      27                     ;LCALL DELAYCH
0022 11E9             28                     ACALL CHDELAY
0024 1200BD           29                     LCALL DELAY
                      30                     
0027 D8F1             31                     DJNZ R0,MLEFT
0029 208002           32     RIGHT:  JB P0.0,BSKIP
002C 11C8             33                     ACALL CHOOSE
002E                  34     BSKIP:
                      35     
002E F590             36                     MOV P1, A ;Rotate right 7 times
0030 03               37                     RR A
                      38                     ;LCALL DELAYCH
0031 11E9             39                     ACALL CHDELAY
0033 1200BD           40                     LCALL DELAY
0036 D9F1             41                     DJNZ R1,RIGHT
0038 22               42                     RET             
                      43     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0039                  44     MODE2:  ;Counting
0039 E4               45                     CLR A
003A 7AFF             46                     MOV R2,#0FFH
003C 208102           47     AGAIN:  JB P0.1,CSKIP
003F 11C8             48                     ACALL CHOOSE
0041                  49     CSKIP:
                      50     
0041 04               51                     INC A
0042 F590             52                     MOV P1,A
                      53                     
0044 11E9             54                     ACALL CHDELAY
0046 1200BD           55                     LCALL DELAY
                      56     
0049 D8F1             57                     DJNZ R0,AGAIN
004B 22               58                     RET
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 12:03:26 PAGE     2

                      59     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
004C                  60     MODE3:  ;Double bouncing
                      61     
004C E4               62                     CLR A
004D 7880             63                     MOV R0,#128
004F 7901             64                     MOV R1,#001
0051 7A03             65                     MOV R2,#003
                      66                     
0053                  67     DBLIN:  
0053 208202           68                     JB P0.2,DSKIP
0056 11C8             69                     ACALL CHOOSE
0058                  70     DSKIP:  
0058 11E9             71                     ACALL CHDELAY
005A E8               72                     MOV A,R0
005B 49               73                     ORL A,R1
005C 11BD             74                     ACALL DELAY
005E F590             75                     MOV P1,A
0060 E8               76                     MOV A,R0
0061 03               77                     RR A
0062 F8               78                     MOV R0,A
0063 E9               79                     MOV A,R1
0064 23               80                     RL A
0065 F9               81                     MOV R1,A
0066 DAEB             82                     DJNZ R2,DBLIN
                      83                     
0068                  84     DBLOUT: 
0068 208202           85                     JB P0.2,DDSKIP
006B 11C8             86                     ACALL CHOOSE
006D                  87     DDSKIP: 
006D 7A03             88                     MOV R2,#003
006F 11E9             89                     ACALL CHDELAY
0071 E8               90                     MOV A,R0
0072 49               91                     ORL A,R1
0073 11BD             92                     ACALL DELAY
0075 F590             93                     MOV P1,A
0077 E8               94                     MOV A,R0
0078 23               95                     RL A
0079 F8               96                     MOV R0,A
007A E9               97                     MOV A,R1
007B 03               98                     RR A
007C F9               99                     MOV R1,A
007D DAE9            100                     DJNZ R2,DBLOUT
007F 22              101                     RET
                     102     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0080                 103     MODE4:  ;Cyclic
                     104                     
0080 7401            105                     MOV A,#01H
0082 7808            106                     MOV R0,#08H
                     107                     
0084 208302          108     NEXT:   JB P0.3,CYSKIP
0087 11C8            109                     ACALL CHOOSE
0089                 110     CYSKIP:
0089 F590            111                     MOV P1,A
008B A990            112                     MOV R1,P1
008D 23              113                     RL A
008E 4590            114                     ORL A,P1
0090 11E9            115                     ACALL CHDELAY
0092 1200BD          116                     LCALL DELAY
0095 D8ED            117                     DJNZ R0,NEXT
                     118                     
0097 22              119                     RET
                     120     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0098                 121     OFF:    ;Flashing lights
0098 208015          122                     JB P0.0, ON
009B 208112          123                     JB P0.1, ON
009E 20820F          124                     JB P0.2, ON
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 12:03:26 PAGE     3

00A1 20830C          125                     JB P0.3, ON
                     126     
00A4 11E9            127                     ACALL CHDELAY
00A6 74FF            128                     MOV A,#0FFH
00A8 F590            129                     MOV P1,A
00AA 1200BD          130                     LCALL DELAY
00AD E4              131                     CLR A
00AE F590            132                     MOV P1,A
00B0                 133     ON:             
00B0 22              134                     RET
                     135     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
00B1                 136     PFIVE:  ;.5 sec delay
00B1 7F07            137                     MOV R7, #07H ;Delay function
00B3 22              138                     RET
                     139     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
00B4                 140     ONE:    ;1 dec delay
00B4 7F0F            141                     MOV R7, #0FH ;Delay function
00B6 22              142                     RET
                     143     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
00B7                 144     ONEFI:  ;1.5 sec delay
00B7 7F15            145                     MOV R7, #015H ;Delay function
00B9 22              146                     RET
                     147     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
00BA                 148     TWO:    ;2 sec delay
00BA 7F1D            149                     MOV R7, #01DH ;Delay function
00BC 22              150                     RET
                     151     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00BD                 152     DELAY:
00BD 7EFF            153     DLY20:  MOV R6, #0FFH
00BF 7DFF            154     DLY21:  MOV R5, #0FFH
00C1 DDFE            155     DLY22:  DJNZ R5, DLY22
00C3 DEFA            156                     DJNZ R6, DLY21
00C5 DFF6            157                     DJNZ R7, DLY20
00C7 22              158                     RET
                     159     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00C8                 160     CHOOSE:
00C8 20800D          161                     JB P0.0, BOUN
00CB 20810E          162                     JB P0.1, COUN
00CE 20820F          163                     JB P0.2, DBL
00D1 208310          164                     JB P0.3, CYC
                     165                     
                     166                     
00D4 1198            167                     ACALL OFF
00D6 8010            168                     SJMP BOT
00D8 1114            169     BOUN:   ACALL MODE1
00DA 800C            170                     SJMP BOT
00DC 1139            171     COUN:   ACALL MODE2
00DE 8008            172                     SJMP BOT
00E0 114C            173     DBL:    ACALL MODE3
00E2 8004            174                     SJMP BOT
00E4 1180            175     CYC:    ACALL MODE4
00E6 8000            176                     SJMP BOT
00E8 22              177     BOT:    RET             
                     178     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
00E9                 179     CHDELAY:
00E9 20850A          180                     JB P0.5, CONE
00EC 20860B          181                     JB P0.6, CONEFI
00EF 20870C          182                     JB P0.7, CTWO
                     183                     
00F2 11B1            184                     ACALL PFIVE
00F4 800A            185                     SJMP ENDTIME
00F6 11B4            186     CONE:   ACALL ONE
00F8 8006            187                     SJMP ENDTIME
00FA 11B7            188     CONEFI: ACALL ONEFI
00FC 8002            189                     SJMP ENDTIME
00FE 11BA            190     CTWO:   ACALL TWO
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 12:03:26 PAGE     4

0100 22              191     ENDTIME: RET
                     192                     
                     193     END
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/17/2014 12:03:26 PAGE     5

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AGAIN. . . . . . .  C ADDR   003CH   A   
BOT. . . . . . . .  C ADDR   00E8H   A   
BOUN . . . . . . .  C ADDR   00D8H   A   
BSKIP. . . . . . .  C ADDR   002EH   A   
CHDELAY. . . . . .  C ADDR   00E9H   A   
CHOOSE . . . . . .  C ADDR   00C8H   A   
CONE . . . . . . .  C ADDR   00F6H   A   
CONEFI . . . . . .  C ADDR   00FAH   A   
COUN . . . . . . .  C ADDR   00DCH   A   
CSKIP. . . . . . .  C ADDR   0041H   A   
CTWO . . . . . . .  C ADDR   00FEH   A   
CYC. . . . . . . .  C ADDR   00E4H   A   
CYSKIP . . . . . .  C ADDR   0089H   A   
DBL. . . . . . . .  C ADDR   00E0H   A   
DBLIN. . . . . . .  C ADDR   0053H   A   
DBLOUT . . . . . .  C ADDR   0068H   A   
DDSKIP . . . . . .  C ADDR   006DH   A   
DELAY. . . . . . .  C ADDR   00BDH   A   
DLY20. . . . . . .  C ADDR   00BDH   A   
DLY21. . . . . . .  C ADDR   00BFH   A   
DLY22. . . . . . .  C ADDR   00C1H   A   
DSKIP. . . . . . .  C ADDR   0058H   A   
ENDTIME. . . . . .  C ADDR   0100H   A   
LOOP . . . . . . .  C ADDR   0010H   A   
MAIN . . . . . . .  C ADDR   0000H   A   
MLEFT. . . . . . .  C ADDR   001AH   A   
MODE1. . . . . . .  C ADDR   0014H   A   
MODE2. . . . . . .  C ADDR   0039H   A   
MODE3. . . . . . .  C ADDR   004CH   A   
MODE4. . . . . . .  C ADDR   0080H   A   
NEXT . . . . . . .  C ADDR   0084H   A   
OFF. . . . . . . .  C ADDR   0098H   A   
ON . . . . . . . .  C ADDR   00B0H   A   
ONE. . . . . . . .  C ADDR   00B4H   A   
ONEFI. . . . . . .  C ADDR   00B7H   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PFIVE. . . . . . .  C ADDR   00B1H   A   
RIGHT. . . . . . .  C ADDR   0029H   A   
SKIP . . . . . . .  C ADDR   001FH   A   
TWO. . . . . . . .  C ADDR   00BAH   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
