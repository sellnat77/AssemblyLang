A51 MACRO ASSEMBLER  PROJEFT1                                                             10/14/2014 11:40:16 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN Projeft1.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Projeft1.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1                     ORG 0000H
0000                   2     MAIN:
0000 D280              3                     SETB P0.0
0002 D281              4                     SETB P0.1
0004 D282              5                     SETB P0.2
0006 D283              6                     SETB P0.3
0008 D284              7                     SETB P0.4
000A D285              8                     SETB P0.5
000C D286              9                     SETB P0.6
000E D287             10                     SETB P0.7
                      11                     
0010                  12     LOOP:           
0010 120078           13                     LCALL MODECH
                      14     
0013 80FB             15                     SJMP LOOP
                      16     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0015                  17     MODE1:  ;Bouncing
0015 7401             18                     MOV A, #01H     ;Reset A
0017 7807             19                     MOV R0,#07H ;2 Registers used to bounce left 
0019 7907             20                     MOV R1,#07H     ;Then right
001B                  21     MLEFT:  ;LCALL MODECH
001B F590             22                     MOV P1, A ;Rotate left 7 times
001D 23               23                     RL A
001E 12009E           24                     LCALL DELAYCH
0021 D8F8             25                     DJNZ R0,MLEFT
0023                  26     RIGHT:  ;LCALL MODECH
0023 F590             27                     MOV P1, A ;Rotate right 7 times
0025 03               28                     RR A
0026 12009E           29                     LCALL DELAYCH
0029 D9F8             30                     DJNZ R1,RIGHT
002B 22               31                     RET             
                      32     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
002C                  33     MODE2:  ;Counting
002C E4               34                     CLR A
002D 7AFF             35                     MOV R2,#0FFH
002F                  36     AGAIN:  ;LCALL MODECH
002F 04               37                     INC A
0030 F590             38                     MOV P1,A
0032 12009E           39                     LCALL DELAYCH
0035 D8F8             40                     DJNZ R0,AGAIN
0037 22               41                     RET
                      42     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0038                  43     MODE3:  ;Double bouncing
0038 120078           44                     LCALL MODECH
003B 22               45                     RET
                      46     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
003C                  47     MODE4:  ;Cyclic
003C 120078           48                     LCALL MODECH
003F 22               49                     RET
                      50     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0040                  51     OFF:    ;Flashing
0040 120078           52                     LCALL MODECH
0043 22               53                     RET
                      54     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0044                  55     PFIVE:  ;.5 sec delay
0044 7F01             56                     MOV R7, #001H ;Delay function
0046 7E0F             57     DLY50:  MOV R6, #00FH
0048 7DFF             58     DLY51:  MOV R5, #0FFH
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/14/2014 11:40:16 PAGE     2

004A DDFE             59     DLY52:  DJNZ R5, DLY52
004C DEFA             60                     DJNZ R6, DLY51
004E DFF6             61                     DJNZ R7, DLY50
0050 22               62                     RET
                      63     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0051                  64     ONE:    ;1 dec delay
0051 7F01             65                     MOV R7, #001H ;Delay function
0053 7EAF             66     DLY10:  MOV R6, #0AFH
0055 7DFF             67     DLY11:  MOV R5, #0FFH
0057 DDFE             68     DLY12:  DJNZ R5, DLY12
0059 DEFA             69                     DJNZ R6, DLY11
005B DFF6             70                     DJNZ R7, DLY10
005D 22               71                     RET
                      72     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
005E                  73     ONEFI:  ;1.5 sec delay
005E 7F01             74                     MOV R7, #001H ;Delay function
0060 7EFF             75     DLY150: MOV R6, #0FFH
0062 7DFF             76     DLY151: MOV R5, #0FFH
0064 DDFE             77     DLY152: DJNZ R5, DLY152
0066 DEFA             78                     DJNZ R6, DLY151
0068 DFF6             79                     DJNZ R7, DLY150
006A 22               80                     RET
                      81     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
006B                  82     TWO:    ;2 sec delay
006B 7F0F             83                     MOV R7, #00FH ;Delay function
006D 7EFF             84     DLY20:  MOV R6, #0FFH
006F 7DFF             85     DLY21:  MOV R5, #0FFH
0071 DDFE             86     DLY22:  DJNZ R5, DLY22
0073 DEFA             87                     DJNZ R6, DLY21
0075 DFF6             88                     DJNZ R7, DLY20
0077 22               89                     RET
                      90     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
0078                  91     MODECH: ;Select mode based on pin
                      92                     
0078 208009           93     RESET:  JB P0.0,BOUN            
007B 20810B           94                     JB P0.1,COUN
007E 20820D           95                     JB P0.2,CYC
0081 20830F           96                     JB P0.3,DBLBOUN
                      97                     
0084 120015           98     BOUN:   LCALL MODE1     
0087 80EF             99                     SJMP RESET
0089 12002C          100     COUN:   LCALL MODE2             
008C 80EA            101                     SJMP RESET
008E 120038          102     CYC:    LCALL MODE3     
0091 80E5            103                     SJMP RESET
0093 12003C          104     DBLBOUN:LCALL MODE4     
0096 80E0            105                     SJMP RESET
0098 120040          106                     LCALL OFF
009B 80DB            107                     SJMP RESET
009D 22              108                     RET
                     109     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                
009E                 110     DELAYCH:        ;Select delay based on pin
009E 208409          111     TIME:   JB P0.4,POINT
00A1 20850B          112                     JB P0.5,FULL
00A4 20860D          113                     JB P0.6,FULLHAF
00A7 20870F          114                     JB P0.7,TWOFULL
                     115                     
00AA 120044          116     POINT:  LCALL PFIVE
00AD 80EF            117                     SJMP TIME
00AF 120051          118     FULL:   LCALL ONE
00B2 80EA            119                     SJMP TIME
00B4 12005E          120     FULLHAF:LCALL ONEFI
00B7 80E5            121                     SJMP TIME
00B9 12006B          122     TWOFULL:LCALL TWO
00BC 80E0            123                     SJMP TIME
00BE 22              124                     RET
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/14/2014 11:40:16 PAGE     3

                     125     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     126     END
A51 MACRO ASSEMBLER  PROJEFT1                                                             10/14/2014 11:40:16 PAGE     4

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

AGAIN. . . . . . .  C ADDR   002FH   A   
BOUN . . . . . . .  C ADDR   0084H   A   
COUN . . . . . . .  C ADDR   0089H   A   
CYC. . . . . . . .  C ADDR   008EH   A   
DBLBOUN. . . . . .  C ADDR   0093H   A   
DELAYCH. . . . . .  C ADDR   009EH   A   
DLY10. . . . . . .  C ADDR   0053H   A   
DLY11. . . . . . .  C ADDR   0055H   A   
DLY12. . . . . . .  C ADDR   0057H   A   
DLY150 . . . . . .  C ADDR   0060H   A   
DLY151 . . . . . .  C ADDR   0062H   A   
DLY152 . . . . . .  C ADDR   0064H   A   
DLY20. . . . . . .  C ADDR   006DH   A   
DLY21. . . . . . .  C ADDR   006FH   A   
DLY22. . . . . . .  C ADDR   0071H   A   
DLY50. . . . . . .  C ADDR   0046H   A   
DLY51. . . . . . .  C ADDR   0048H   A   
DLY52. . . . . . .  C ADDR   004AH   A   
FULL . . . . . . .  C ADDR   00AFH   A   
FULLHAF. . . . . .  C ADDR   00B4H   A   
LOOP . . . . . . .  C ADDR   0010H   A   
MAIN . . . . . . .  C ADDR   0000H   A   
MLEFT. . . . . . .  C ADDR   001BH   A   
MODE1. . . . . . .  C ADDR   0015H   A   
MODE2. . . . . . .  C ADDR   002CH   A   
MODE3. . . . . . .  C ADDR   0038H   A   
MODE4. . . . . . .  C ADDR   003CH   A   
MODECH . . . . . .  C ADDR   0078H   A   
OFF. . . . . . . .  C ADDR   0040H   A   
ONE. . . . . . . .  C ADDR   0051H   A   
ONEFI. . . . . . .  C ADDR   005EH   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PFIVE. . . . . . .  C ADDR   0044H   A   
POINT. . . . . . .  C ADDR   00AAH   A   
RESET. . . . . . .  C ADDR   0078H   A   
RIGHT. . . . . . .  C ADDR   0023H   A   
TIME . . . . . . .  C ADDR   009EH   A   
TWO. . . . . . . .  C ADDR   006BH   A   
TWOFULL. . . . . .  C ADDR   00B9H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
