A51 MACRO ASSEMBLER  LAB5TASK1                                                            10/10/2014 10:26:51 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN Lab5Task1.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Lab5Task1.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

0000                   1     ORG     0000H
0000 020030            2     LJMP MAIN
0030                   3     ORG 0030H
                       4     
0030                   5     MAIN:   
0030 D287              6                     SETB P0.7 ;Set p0.7 as input
0032                   7     LOOP:   
0032 308702            8                     JNB P0.7,PINON ;Jump if p0.7 is on
0035 1148              9                     ACALL BOUNC        ;Otherwise, bounce   
0037 115D             10     PINON:  ACALL CHASE    ;Chase is p0.7 is on
0039 80F7             11                     SJMP    LOOP   ;Repeat forever
                      12                     
003B 7B1F             13     DELY:   MOV R3, #01FH ;Delay function
003D 79FF             14     DLY0:   MOV R1, #0FFH
003F 7AFF             15     DLY1:   MOV R2, #0FFH
0041 DAFE             16     DLY2:   DJNZ R2, DLY2
0043 D9FA             17                     DJNZ R1, DLY1
0045 DBF6             18                     DJNZ R3, DLY0
0047 22               19                     RET
                      20     
0048 7401             21     BOUNC:  MOV A,#01H      ;Reset A
004A 7807             22                     MOV R0,#07H ;2 Registers used to bounce left 
004C 7C07             23                     MOV R4,#07H     ;Then right
                      24     
004E F590             25     MLEFT:  MOV P1, A ;Rotate left 7 times
0050 23               26                     RL A
0051 113B             27                     ACALL DELY
0053 D8F9             28                     DJNZ R0,MLEFT
                      29     
0055 F590             30     RIGHT:  MOV P1, A ;Rotate right 7 times
0057 03               31                     RR A
0058 113B             32                     ACALL DELY
005A DCF9             33                     DJNZ R4,RIGHT
005C 22               34                     RET
                      35     
005D 7401             36     CHASE:  MOV A,#01H ;Reset A
005F 7808             37                     MOV R0,#08H ;Rotate left 8 times to show the chase
                      38     
0061 F590             39     CLEFT:  MOV P1, A
0063 23               40                     RL A
0064 113B             41                     ACALL DELY
0066 D8F9             42                     DJNZ R0,CLEFT
0068 22               43                     RET
                      44     END
A51 MACRO ASSEMBLER  LAB5TASK1                                                            10/10/2014 10:26:51 PAGE     2

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BOUNC. . . . . . .  C ADDR   0048H   A   
CHASE. . . . . . .  C ADDR   005DH   A   
CLEFT. . . . . . .  C ADDR   0061H   A   
DELY . . . . . . .  C ADDR   003BH   A   
DLY0 . . . . . . .  C ADDR   003DH   A   
DLY1 . . . . . . .  C ADDR   003FH   A   
DLY2 . . . . . . .  C ADDR   0041H   A   
LOOP . . . . . . .  C ADDR   0032H   A   
MAIN . . . . . . .  C ADDR   0030H   A   
MLEFT. . . . . . .  C ADDR   004EH   A   
P0 . . . . . . . .  D ADDR   0080H   A   
P1 . . . . . . . .  D ADDR   0090H   A   
PINON. . . . . . .  C ADDR   0037H   A   
RIGHT. . . . . . .  C ADDR   0055H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
